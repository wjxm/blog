(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{599:function(e,t,n){"use strict";n.r(t);var a=n(30),l=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"一-官网操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-官网操作"}},[e._v("#")]),e._v(" 一 官网操作")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("申请"),n("a",{attrs:{href:"https://www.algolia.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("algolia"),n("OutboundLink")],1),e._v("官方账号")])]),e._v(" "),n("li",[n("p",[e._v("创建创建新的indices, 名字随意这里叫blog")])]),e._v(" "),n("li",[n("p",[e._v("在api keys项里 选择all api keys ，再点击new api key\n"),n("img",{attrs:{src:"http://img.leiyiming.top/blog/image-20200821200603231.png",alt:"image-20200821200603231"}}),e._v(" "),n("img",{attrs:{src:"http://img.leiyiming.top/blog/image-20200821200902233.png",alt:"image-20200821200902233"}})])])]),e._v(" "),n("h2",{attrs:{id:"二-本地操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-本地操作"}},[e._v("#")]),e._v(" 二 本地操作")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://docsearch.algolia.com/docs/run-your-own/",target:"_blank",rel:"noopener noreferrer"}},[e._v("按照官网操作搭建本地环境"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("搭建一个本地docker 爬虫环境，爬取自己博客的内容发送到algolia")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("创建.env文件")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("#config文件夹下 .env文件\nAPPLICATION_ID=YOUR_APP_ID\nAPI_KEY=YOUR_API_KEY\n")])])])]),e._v(" "),n("li",[n("p",[e._v("注意：下面.theme-vdoing-content 是指要爬取的所有h1-6标签的外层容器类\ntext 是指要爬取的是容器下的哪些标签")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('#config文件夹下 config.json文件\n{\n    "index_name": "blog",\n    "start_urls": ["https://myblog.leiyiming.top"],\n    "selectors": {\n      "lvl0": {\n      "selector": "p.sidebar-heading.open",\n      "global": true,\n      "default_value": "Documentation"\n    },\n      "lvl1": ".theme-vdoing-content h1",\n      "lvl2": ".theme-vdoing-content h3",\n      "lvl3": ".theme-vdoing-content h4",\n      "lvl4": ".theme-vdoing-content h5",\n      "lvl5": ".theme-vdoing-content h6",\n      "text": ".theme-vdoing-content p,.theme-vdoing-content a,.theme-vdoing-content ol,.theme-vdoing-content li"\n    }\n  }\n')])])])]),e._v(" "),n("li",[n("p",[e._v("安装jq 解析")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("安装chocolatey，以管理员方式运行cmd。输入")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('@"%SystemRoot%\\System32\\WindowsPowerShell\\v1.0\\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString(\'https://chocolatey.org/install.ps1\'))" && SET "PATH=%PATH%;%ALLUSERSPROFILE%\\chocolatey\\bin"\n')])])])]),e._v(" "),n("li",[n("p",[e._v("安装jq   运行cmd，输入命令："),n("code",[e._v("chocolatey install jq")])])])])]),e._v(" "),n("li",[n("p",[e._v("安装doctor ,官网下载，安装，启动备用")])]),e._v(" "),n("li",[n("p",[e._v("运行爬取命令，注意配置号.env路径，和config.json 路径，env使用相对路径，config.json使用绝对路径")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('winpty docker run -it --env-file=config/.env -e "CONFIG=$(cat E:/Blog/config/config.json | jq -r tostring)" algolia/docsearch-scraper\n')])])])]),e._v(" "),n("li",[n("p",[e._v("配置vuepress config.js")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    algolia:{\n      appId: '',\n      apiKey: '',\n      indexName: '',\n      algoliaOptions:{\n        hitsPerPage: 10,  # 最大显示数量，\n        facetFilters: \"\"  # 过滤条件，\n      }\n    },\n")])])])])]),e._v(" "),n("p",[e._v("基本上就是这些，详见官网")])])}),[],!1,null,null,null);t.default=l.exports}}]);