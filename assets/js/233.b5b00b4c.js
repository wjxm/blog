(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{654:function(n,e,s){"use strict";s.r(e);var t=s(30),a=Object(t.a)({},(function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("p",[n._v("利用socket发送数据的功能发送文件")]),n._v(" "),s("p",[n._v("服务端配置")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('import socket\nimport os\n\nsk = socket.socket()\naddress = ("169.254.77.227",8000)\nsk.bind(address)\nsk.listen(2)\n\nprint("waiting....")\nBASE_DIR = os.path.dirname(os.path.abspath(__file__))\nwhile 1:\n    conn, addr = sk.accept()\n\n    while True:\n        data = conn.recv(1024)                      #此时接收到的数据为bytes类型，需要编码（解码，忘了）\n        cmd,filename,filesize  = str(data,\'utf8\').split(\'|\')     #解包\n        path = os.path.join(BASE_DIR,"yuan",filename)           #设置接收路径\n        filesize=int(filesize)                                  #将大小重新转换为int型，在str的类型下\n\n        f = open(path,"ab")\n\n        has_receive = 0\n        while has_receive != filesize:\n            conn.recv(1024)\n            f.write(data)\n            has_receive += len(data)\n        f.close()\n\n\nsk.close()\n')])])]),s("p",[n._v("客户端配置")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('import socket\nimport os\nsk = socket.socket()\naddress = ("169.254.77.227",8000)\nsk.connect(address)\n\nBASE_DIR = os.path.dirname(os.path.abspath(__file__))\n\nwhile True:\n    innp = input(">>>").strip()   #post\\ 11.png     #移除字符串头尾指定的字符\n    cmd,path = innp.split(\'|\')\n    path = os.path.join(BASE_DIR,path)              #拼接成当前系统下的路径\n    filename = os.path.basename(path)               #文件地址名\n    file_size = os.stat(path).st_size            #获取文件大小，int数据类型\n    file_info = "post|%s|%s"%(filename,file_size)     #将命令，地址，大小，通过|格式打包\n    sk.sendall(bytes(file_info,"utf8"))\n\n    f = open(path,\'rb\')\n    has_sent = 0\n    while has_sent != file_size:            #通过循环将文件打散多次传送\n        data = f.read(1024)    #  设置发送数据的大小，1024字节\n        sk.sendall(data)\n        has_sent += len(data)\n\n    f.close()\n\n\n\n\nsk.close()\n')])])])])}),[],!1,null,null,null);e.default=a.exports}}]);